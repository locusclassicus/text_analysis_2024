<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>7&nbsp; Регулярные выражения – Компьютерный анализ текста</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./scrape.html" rel="next">
<link href="./share.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Поиск не дал результатов",
    "search-matching-documents-text": "Результаты поиска",
    "search-copy-link-title": "Скопировать ссылку",
    "search-hide-matches-text": "Скрыть дополнительные результаты",
    "search-more-match-text": "дополнительный результат в этом документе",
    "search-more-matches-text": "дополнительных результата(-ов) в этом документе",
    "search-clear-button-title": "Очистить",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Отменить",
    "search-submit-button-title": "Найти",
    "search-label": "Поиск"
  }
}</script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Переключить боковую панель навигации" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./regex.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Регулярные выражения</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Переключить боковую панель навигации" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Поиск" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Компьютерный анализ текста</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Поиск"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Введение</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./start.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Начало работы</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tabular.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Таблицы</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./plot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Визуализации</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./iterate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Циклы, условия, функции</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./import.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Импорт: JSON &amp; XML</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./share.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Публикационная система Quarto</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./regex.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Регулярные выражения</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./scrape.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Веб-скрапинг</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tokenize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Токенизация, лемматизация, POS-тэггинг и синтаксический анализ</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./count.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Распределения слов и анализ частотностей</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sentiment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Эмоциональная тональность</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lsa.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Латентно-семантический анализ</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pmi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Векторные представления слов на основе PMI. Word2Vec.</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lda.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Тематическое моделирование c LDA</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cluster.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Кластеризация и метод главных компонент</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stylo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Стилометрический анализ с пакетом <code>stylo</code></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./consensus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Консенсусные деревья и сети</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./igraph.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Сетевые данные в <code>igraph</code></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ggraph.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Графический дизайн сетей в <code>ggraph</code></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dracor.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Анализ сетей и обнаружение сообществ</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./maps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Пространственные данные в R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Регрессионный анализ</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./multivar.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Регрессионные модели с <code>tidymodels</code></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Классификация</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./llm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Работа с LLM</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Литература</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Содержание</h2>
   
  <ul>
  <li><a href="#regex-в-базовом-r" id="toc-regex-в-базовом-r" class="nav-link active" data-scroll-target="#regex-в-базовом-r"><span class="header-section-number">7.1</span> Regex в базовом R</a></li>
  <li><a href="#литералы-и-классы" id="toc-литералы-и-классы" class="nav-link" data-scroll-target="#литералы-и-классы"><span class="header-section-number">7.2</span> Литералы и классы</a></li>
  <li><a href="#якоря" id="toc-якоря" class="nav-link" data-scroll-target="#якоря"><span class="header-section-number">7.3</span> Якоря</a></li>
  <li><a href="#метасимволы" id="toc-метасимволы" class="nav-link" data-scroll-target="#метасимволы"><span class="header-section-number">7.4</span> Метасимволы</a></li>
  <li><a href="#экранирование" id="toc-экранирование" class="nav-link" data-scroll-target="#экранирование"><span class="header-section-number">7.5</span> Экранирование</a></li>
  <li><a href="#квантификация" id="toc-квантификация" class="nav-link" data-scroll-target="#квантификация"><span class="header-section-number">7.6</span> Квантификация</a></li>
  <li><a href="#жадная-и-ленивая-квантификация" id="toc-жадная-и-ленивая-квантификация" class="nav-link" data-scroll-target="#жадная-и-ленивая-квантификация"><span class="header-section-number">7.7</span> Жадная и ленивая квантификация</a></li>
  <li><a href="#regex-в-stringr-основы" id="toc-regex-в-stringr-основы" class="nav-link" data-scroll-target="#regex-в-stringr-основы"><span class="header-section-number">7.8</span> Regex в stringr: основы</a></li>
  <li><a href="#str_detect-и-str_count" id="toc-str_detect-и-str_count" class="nav-link" data-scroll-target="#str_detect-и-str_count"><span class="header-section-number">7.9</span> str_detect() и str_count()</a></li>
  <li><a href="#str_extract-str_subset-и-str_match" id="toc-str_extract-str_subset-и-str_match" class="nav-link" data-scroll-target="#str_extract-str_subset-и-str_match"><span class="header-section-number">7.10</span> str_extract(), str_subset() и str_match()</a></li>
  <li><a href="#str_replace" id="toc-str_replace" class="nav-link" data-scroll-target="#str_replace"><span class="header-section-number">7.11</span> str_replace</a></li>
  <li><a href="#str_split" id="toc-str_split" class="nav-link" data-scroll-target="#str_split"><span class="header-section-number">7.12</span> str_split</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Регулярные выражения</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Есть старая шутка, ее приписывают программисту Джейми Завински: если у вас есть проблема, и вы собираетесь ее решать при помощи регулярных выражений, то у вас две проблемы. Регулярные выражения – это формальный язык, который используется для того, чтобы находить, извлекать и заменять части текста.</p>
<p>Регулярные выражения (regex, regexp) объединяют <em>буквальные символы</em> (литералы) и <em>метасимволы</em> (символы-джокеры, англ. wildcard characters).</p>
<p>Для поиска используется строка-образец (англ. pattern, по-русски её часто называют “шаблоном”, “маской”), которая задает правило поиска. Строка замены также может содержать в себе специальные символы.</p>
<p>Отличный путеводитель по миру регулярных выражений можно найти <a href="https://cran.r-project.org/web/packages/stringr/vignettes/regular-expressions.html">здесь</a>.</p>
<section id="regex-в-базовом-r" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="regex-в-базовом-r"><span class="header-section-number">7.1</span> Regex в базовом R</h2>
<p>В базовом R за работу со строками отвечают, среди прочего, такие функции, как <code>grep()</code> и <code>grepl()</code>. При этом <code>grepl()</code> возвращает TRUE, если шаблон найден в соответствующей символьной строке, а <code>grep()</code> возвращает вектор индексов символьных строк, содержащих паттерн.</p>
<p>Обеим функциям необходим аргумент <code>pattern</code> и аргумент <code>x</code>, где <code>pattern</code> - регулярное выражение, по которому производится поиск, а аргумент <code>x</code> - вектор символов, по которым следует искать совпадения.</p>
<p>Функция <code>gsub()</code> позволяет производить замену и требует также аргумента <code>replacement</code>.</p>
</section>
<section id="литералы-и-классы" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="литералы-и-классы"><span class="header-section-number">7.2</span> Литералы и классы</h2>
<p>Буквальные символы – это то, что вы ожидаете увидеть (или не увидеть – для управляющих и пробельных символов); можно сказать, что это символы, которые ничего не “имеют в виду”. Их можно объединять в классы при помощи квадратных скобок, например, так: <code>[abc]</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"d"</span>, <span class="st">"c"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"[abc]"</span>, vec)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE  TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">"[abc]"</span>, vec)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 3</code></pre>
</div>
</div>
<p>Для некоторых классов есть специальные обозначения.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 29%">
<col style="width: 41%">
<col style="width: 29%">
</colgroup>
<thead>
<tr class="header">
<th>Класс</th>
<th>Эквивалент</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[:upper:]</td>
<td>[A-Z]</td>
<td>Символы верхнего регистра</td>
</tr>
<tr class="even">
<td>[:lower:]</td>
<td>[a-z]</td>
<td>Символы нижнего регистра</td>
</tr>
<tr class="odd">
<td>[:alpha:]</td>
<td>[[:upper:][:lower:]]</td>
<td>Буквы</td>
</tr>
<tr class="even">
<td>[:digit:]</td>
<td>[0-9], т. е. \d</td>
<td>Цифры</td>
</tr>
<tr class="odd">
<td>[:alnum:]</td>
<td>[[:alpha:][:digit:]]</td>
<td>Буквы и цифры</td>
</tr>
<tr class="even">
<td>[:word:]</td>
<td>[[:alnum:]_], т. е. \w</td>
<td>Символы, образующие «слово»</td>
</tr>
<tr class="odd">
<td>[:punct:]</td>
<td>[-!“#$%&amp;’()*+,./:;&lt;=&gt;?@[\]_`{|}~]</td>
<td>Знаки пунктуации</td>
</tr>
<tr class="even">
<td>[:blank:]</td>
<td>[\s\t]</td>
<td>Пробел и табуляция</td>
</tr>
<tr class="odd">
<td>[:space:]</td>
<td>[[:blank:]\v\r\n\f], т. е. \s</td>
<td>Пробельные символы</td>
</tr>
<tr class="even">
<td>[:cntrl:]</td>
<td></td>
<td>Управляющие символы (перевод строки, табуляция и т.п.)</td>
</tr>
<tr class="odd">
<td>[:graph:]</td>
<td></td>
<td>Печатные символы</td>
</tr>
<tr class="even">
<td>[:print:]</td>
<td></td>
<td>Печатные символы с пробелом</td>
</tr>
</tbody>
</table>
<p>Эти классы тоже можно задавать в качестве паттерна.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"жираф"</span>, <span class="st">"верблюд1"</span>, <span class="st">"0зебра"</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>( <span class="st">"[[:digit:]]"</span>,  <span class="st">""</span>, vec)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "жираф"   "верблюд" "зебра"  </code></pre>
</div>
</div>
<p><br></p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Задание
</div>
</div>
<div class="callout-body-container callout-body">
<p>В пакете <code>stringr</code> есть небольшой датасет <code>words</code>. Найдите все слова с последовательностью символов wh. Сколько слов содержат два гласных после w?</p>
</div>
</div>
<p><br></p>
<p>В качестве классов можно рассматривать и следующие обозначения:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 41%">
<col style="width: 29%">
<col style="width: 29%">
</colgroup>
<thead>
<tr class="header">
<th>Представление</th>
<th>Эквивалент</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>\d</td>
<td>[0-9]</td>
<td>Цифра</td>
</tr>
<tr class="even">
<td>\D</td>
<td>[^\\d]</td>
<td>Любой символ, кроме цифры</td>
</tr>
<tr class="odd">
<td>\w</td>
<td>[A-Za-zА-Яа-я0-9_]</td>
<td>Символы, образующие «слово» (буквы, цифры и символ подчёркивания)</td>
</tr>
<tr class="even">
<td>\W</td>
<td>[^\\w]</td>
<td>Символы, не образующие «слово»</td>
</tr>
<tr class="odd">
<td>\s</td>
<td>[ \t\v\r\n\f]</td>
<td>Пробельный символ</td>
</tr>
<tr class="even">
<td>\S</td>
<td>[^\\s]</td>
<td>Непробельный символ</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>( <span class="st">"</span><span class="sc">\\</span><span class="st">d"</span>,  <span class="st">""</span>, vec) <span class="co"># вторая косая черта "экранирует" первую</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "жираф"   "верблюд" "зебра"  </code></pre>
</div>
</div>
<p>Внутри квадратных скобор знак <code>^</code> означает отрицание:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>( <span class="st">"[^[:digit:]]"</span>,  <span class="st">""</span>, vec) </span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] ""  "1" "0"</code></pre>
</div>
</div>
<p><br></p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Задание
</div>
</div>
<div class="callout-body-container callout-body">
<p>Найдите все слова в <code>words</code>, в которых за w следует согласный. Замените всю пунктуацию в строке “tomorrow?and-tomorrow_and!tomorrow” на пробелы.</p>
</div>
</div>
<p><br></p>
</section>
<section id="якоря" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="якоря"><span class="header-section-number">7.3</span> Якоря</h2>
<p>Якоря позволяют искать последовательности символов в начале или в конце строки. Знак <code>^</code> (вне квадратных скобок!) означает начало строки, а знак <code>$</code> – конец. Мнемоническое правило: First you get the power (^) and then you get the money ($).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"The spring is a lovely time"</span>, </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Fall is a time of peace"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"time$"</span>, vec)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE</code></pre>
</div>
</div>
<p><br></p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Задание
</div>
</div>
<div class="callout-body-container callout-body">
<p>Найдите все слова в <code>words</code>, которые заканчиваются на x. Найдите все слова, которые начинаются на b или на g.</p>
</div>
</div>
<p><br></p>
</section>
<section id="метасимволы" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="метасимволы"><span class="header-section-number">7.4</span> Метасимволы</h2>
<p>Все метасимволы представлены в таблице ниже.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Описание</th>
<th>Символ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>открывающая квадратная скобка</td>
<td>[</td>
</tr>
<tr class="even">
<td>закрывающая квадратная скобка</td>
<td>]</td>
</tr>
<tr class="odd">
<td>обратная косая черта</td>
<td>\</td>
</tr>
<tr class="even">
<td>карет</td>
<td>^</td>
</tr>
<tr class="odd">
<td>знак доллара</td>
<td>$</td>
</tr>
<tr class="even">
<td>точка</td>
<td>.</td>
</tr>
<tr class="odd">
<td>вертикальная черта</td>
<td>|</td>
</tr>
<tr class="even">
<td>знак вопроса</td>
<td>?</td>
</tr>
<tr class="odd">
<td>астериск</td>
<td>*</td>
</tr>
<tr class="even">
<td>плюс</td>
<td>+</td>
</tr>
<tr class="odd">
<td>открывающая фигурная скобка</td>
<td>{</td>
</tr>
<tr class="even">
<td>закрывающая фигурная скобка</td>
<td>}</td>
</tr>
<tr class="odd">
<td>открывающая круглая скобка</td>
<td>(</td>
</tr>
<tr class="even">
<td>закрывающая круглая скобка</td>
<td>)</td>
</tr>
</tbody>
</table>
<p>Квадратные скобки используются для создания классов, карет и знак доллара – это якоря, но карет внутри квадратных скобок может также быть отрицанием. Точка – это любой знак.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"жираф"</span>, <span class="st">"верблюд1"</span>, <span class="st">"0зебра"</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">".б"</span>, vec) </span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 3</code></pre>
</div>
</div>
<p><br></p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Задание
</div>
</div>
<div class="callout-body-container callout-body">
<p>Найдите все слова в <code>words</code>, в которых есть любые два символа между b и k.</p>
</div>
</div>
<p><br></p>
</section>
<section id="экранирование" class="level2" data-number="7.5">
<h2 data-number="7.5" class="anchored" data-anchor-id="экранирование"><span class="header-section-number">7.5</span> Экранирование</h2>
<p>Если необходимо найти буквальную точку, буквальный знак вопроса и т.п., то используется экранирование: перед знаком ставится косая черта. Но так как сама косая черта – это метасимвол, но нужно две косые черты, первая из которых экранирует вторую.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"жираф?"</span>, <span class="st">"верблюд."</span>, <span class="st">"зебра"</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">?"</span>, vec) </span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, vec)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE FALSE</code></pre>
</div>
</div>
<p><br></p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Задание
</div>
</div>
<div class="callout-body-container callout-body">
<p>Узнайте, все ли предложения в sentences (входит в stringr) кончаются на точку.</p>
</div>
</div>
<p><br></p>
</section>
<section id="квантификация" class="level2" data-number="7.6">
<h2 data-number="7.6" class="anchored" data-anchor-id="квантификация"><span class="header-section-number">7.6</span> Квантификация</h2>
<p>Квантификатор после символа, символьного класса или группы определяет, сколько раз предшествующее выражение может встречаться. Квантификатор может относиться более чем к одному символу в регулярном выражении, только если это символьный класс или группа.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Представление</th>
<th>Число повторений</th>
<th>Эквивалент</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>?</td>
<td>Ноль или одно</td>
<td>{0,1}</td>
</tr>
<tr class="even">
<td>*</td>
<td>Ноль или более</td>
<td>{0,}</td>
</tr>
<tr class="odd">
<td>+</td>
<td>Одно или более</td>
<td>{1,}</td>
</tr>
</tbody>
</table>
<p>Пример:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"color"</span>, <span class="st">"colour"</span>, <span class="st">"colouur"</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"ou?r"</span>, vec) <span class="co"># ноль или одно </span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"ou+r"</span>, vec) <span class="co"># одно или больше</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE  TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"ou*r"</span>, vec) <span class="co"># ноль или больше</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE TRUE TRUE</code></pre>
</div>
</div>
<p>Точное число повторений (интервал) можно задать в фигурных скобках:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Представление</th>
<th>Число повторений</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>{n}</td>
<td>Ровно n раз</td>
</tr>
<tr class="even">
<td>{m,n}</td>
<td>От m до n включительно</td>
</tr>
<tr class="odd">
<td>{m,}</td>
<td>Не менее m</td>
</tr>
<tr class="even">
<td>{,n}</td>
<td>Не более n</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"color"</span>, <span class="st">"colour"</span>, <span class="st">"colouur"</span>, <span class="st">"colouuuur"</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"ou{1}r"</span>, vec)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"ou{1,2}r"</span>, vec)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE  TRUE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"ou{,2}r"</span>, vec) <span class="co"># это включает и ноль!</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE  TRUE FALSE</code></pre>
</div>
</div>
<p>Часто используется последовательность <code>.*</code> для обозначения любого количества любых символов между двумя частями регулярного выражения.</p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Задание
</div>
</div>
<div class="callout-body-container callout-body">
<p>Узнайте, в каких предложениях в sentences за пробелом следует ровно три согласных.</p>
</div>
</div>
</section>
<section id="жадная-и-ленивая-квантификация" class="level2" data-number="7.7">
<h2 data-number="7.7" class="anchored" data-anchor-id="жадная-и-ленивая-квантификация"><span class="header-section-number">7.7</span> Жадная и ленивая квантификация</h2>
<p>В регулярных выражениях квантификаторам соответствует максимально длинная строка из возможных (квантификаторы являются жадными, англ. greedy). Это может оказаться значительной проблемой. Например, часто ожидают, что выражение <code>&lt;.*&gt;</code> найдёт в тексте теги HTML. Однако если в тексте есть более одного HTML-тега, то этому выражению соответствует <em>целиком строка, содержащая множество тегов</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"&lt;p&gt;&lt;b&gt;Википедия&lt;/b&gt; — свободная энциклопедия, в которой &lt;i&gt;каждый&lt;/i&gt; может изменить или дополнить любую статью.&lt;/p&gt;"</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">"&lt;.*&gt;"</span>, <span class="st">""</span>, vec) <span class="co"># все исчезло!</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] ""</code></pre>
</div>
</div>
<p>Чтобы этого избежать, надо поставить после квантификатора знак вопроса. Это сделает его ленивым.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>regex</th>
<th>значение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>??</td>
<td>0 или 1, лучше 0</td>
</tr>
<tr class="even">
<td>*?</td>
<td>0 или больше, как можно меньше</td>
</tr>
<tr class="odd">
<td>+?</td>
<td>1 или больше, как можно меньше</td>
</tr>
<tr class="even">
<td>{n,m}?</td>
<td>от n до m, как можно меньше</td>
</tr>
</tbody>
</table>
<p>Пример:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">"&lt;.*?&gt;"</span>, <span class="st">""</span>, vec) <span class="co"># все получилось!</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Википедия — свободная энциклопедия, в которой каждый может изменить или дополнить любую статью."</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Задание
</div>
</div>
<div class="callout-body-container callout-body">
<p>Дана строка “tomorrow (and) tomorrow (and) tomorrow”. Необходимо удалить первые скобки с их содержанием.</p>
</div>
</div>
</section>
<section id="regex-в-stringr-основы" class="level2" data-number="7.8">
<h2 data-number="7.8" class="anchored" data-anchor-id="regex-в-stringr-основы"><span class="header-section-number">7.8</span> Regex в stringr: основы</h2>
<p>Пакет <code>stringr</code> является частью <code>tidyverse</code><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
</div>
<p>Это очень удобный инструмент для работы со строками. Вот так можно узнать длину строки или объединить ее с другими строками:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"жираф"</span>, <span class="st">"верблюд"</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(vec)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5 7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">"красивый_"</span>, vec)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "красивый_жираф"   "красивый_верблюд"</code></pre>
</div>
</div>
<p>Элементы вектора можно объединить в одну строку:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(vec, <span class="at">collapse =</span> <span class="st">", "</span>) <span class="co"># теперь у них общие кавычки</span></span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "жираф, верблюд"</code></pre>
</div>
</div>
<p>С помощью <code>str_sub()</code> и <code>str_sub_all()</code> можно выбрать часть строки<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"жираф"</span>, <span class="st">"верблюд"</span>)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(vec, <span class="dv">1</span>, <span class="dv">3</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "жир" "вер"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(vec, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "жира"   "верблю"</code></pre>
</div>
</div>
<p>Функции ниже меняют начертание с прописного на строчное или наоборот:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>VEC <span class="ot">&lt;-</span> <span class="fu">str_to_upper</span>(vec)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>VEC</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ЖИРАФ"   "ВЕРБЛЮД"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_lower</span>(VEC)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "жираф"   "верблюд"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_title</span>(vec)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Жираф"   "Верблюд"</code></pre>
</div>
</div>
<p>Одна из полезнейших функций в этом пакете – <code>str_view()</code>; она помогает увидеть, что поймало регулярное выражение – до того, как вы внесете какие-то изменения в строку.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">"abc"</span>, <span class="st">"a.c"</span>, <span class="st">"bef"</span>), <span class="st">"a</span><span class="sc">\\</span><span class="st">.c"</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2] │ &lt;a.c&gt;</code></pre>
</div>
</div>
<p>Например, с помощью этой функции можно убедиться, что вертикальная черта выступает как логический оператор “или”:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">"grey"</span>, <span class="st">"gray"</span>), <span class="st">"gr(e|a)y"</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;grey&gt;
[2] │ &lt;gray&gt;</code></pre>
</div>
</div>
<p><br></p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Задание
</div>
</div>
<div class="callout-body-container callout-body">
<p>Создайте тиббл с двумя столбцами: letters и numbers (1:26). Преобразуйте, чтобы в третьем столбце появился результат соединения первых двух через подчеркивание, например a_1. Отфильтруйте, чтобы остались только ряды, где есть цифра 3 или буква x.</p>
</div>
</div>
<p><br></p>
</section>
<section id="str_detect-и-str_count" class="level2" data-number="7.9">
<h2 data-number="7.9" class="anchored" data-anchor-id="str_detect-и-str_count"><span class="header-section-number">7.9</span> str_detect() и str_count()</h2>
<p>Аналогом <code>grepl()</code> в <code>stringr</code> является функция <code>str_detect()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rcorpora)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"fruit"</span>)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(fruit)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"       "apricot"     "avocado"     "banana"      "bell pepper"
[6] "bilberry"   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="fu">head</span>(fruit), <span class="st">"[aeiou]$"</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE  TRUE  TRUE FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># какая доля слов заканчивается на гласный?</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">str_detect</span>(fruit, <span class="st">"[aeiou]$"</span>))</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.35</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># сколько всего слов заканчивается на гласный?</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">str_detect</span>(fruit, <span class="st">"[aeiou]$"</span>))</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 28</code></pre>
</div>
</div>
<p>Отрицание можно задать двумя способами:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"words"</span>)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>no_vowels1 <span class="ot">&lt;-</span> <span class="sc">!</span><span class="fu">str_detect</span>(words, <span class="st">"[aeiou]"</span>) <span class="co"># слова без гласных</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>no_vowels2 <span class="ot">&lt;-</span> <span class="fu">str_detect</span>(words, <span class="st">"^[^aeiou]+$"</span>) <span class="co"># слова без гласных</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(no_vowels1 <span class="sc">!=</span> no_vowels2)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p>Логический вектор можно использовать для индексирования:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>words[<span class="sc">!</span><span class="fu">str_detect</span>(words, <span class="st">"[aeiou]"</span>)]</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "by"  "dry" "fly" "mrs" "try" "why"</code></pre>
</div>
</div>
<p>Эту функцию можно применять вместе с функцией filter() из пакета dplyr:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>gods <span class="ot">&lt;-</span> <span class="fu">corpora</span>(<span class="at">which =</span> <span class="st">"mythology/greek_gods"</span>)</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">god =</span> <span class="fu">as.character</span>(gods<span class="sc">$</span>greek_gods), </span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">i =</span> <span class="fu">seq_along</span>(god)</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>             )</span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> </span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(god, <span class="st">"s$"</span>))</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["god"],"name":[1],"type":["chr"],"align":["left"]},{"label":["i"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"Ares","2":"3"},{"1":"Artemis","2":"4"},{"1":"Dionysus","2":"7"},{"1":"Hades","2":"8"},{"1":"Hephaestus","2":"9"},{"1":"Hermes","2":"11"},{"1":"Zeus","2":"14"},{"1":"Chaos","2":"17"},{"1":"Chronos","2":"18"},{"1":"Erebus","2":"19"},{"1":"Eros","2":"20"},{"1":"Hypnos","2":"21"},{"1":"Uranus","2":"22"},{"1":"Phanes","2":"24"},{"1":"Pontus","2":"25"},{"1":"Tartarus","2":"26"},{"1":"Thanatos","2":"28"},{"1":"Nemesis","2":"31"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Вариацией этой функции является <code>str_count()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_count</span>(<span class="fu">as.character</span>(gods<span class="sc">$</span>greek_gods), <span class="st">"[Aa]"</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 1 1 2 0 0 1 1 1 0 1 0 0 1 2 1 0 0 0 0 1 2 1 0 2 3 2 1 0 0</code></pre>
</div>
</div>
<p>Эту функцию удобно использовать вместе с <code>mutate()</code> из <code>dplyr</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> </span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">vowels =</span> <span class="fu">str_count</span>(god, <span class="st">"[AEIOYaeiou]"</span>),</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">consonants =</span> <span class="fu">str_count</span>(god, <span class="st">"[^AEIOYaeiou]"</span>)</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["god"],"name":[1],"type":["chr"],"align":["left"]},{"label":["i"],"name":[2],"type":["int"],"align":["right"]},{"label":["vowels"],"name":[3],"type":["int"],"align":["right"]},{"label":["consonants"],"name":[4],"type":["int"],"align":["right"]}],"data":[{"1":"Aphrodite","2":"1","3":"4","4":"5"},{"1":"Apollo","2":"2","3":"3","4":"3"},{"1":"Ares","2":"3","3":"2","4":"2"},{"1":"Artemis","2":"4","3":"3","4":"4"},{"1":"Athena","2":"5","3":"3","4":"3"},{"1":"Demeter","2":"6","3":"3","4":"4"},{"1":"Dionysus","2":"7","3":"3","4":"5"},{"1":"Hades","2":"8","3":"2","4":"3"},{"1":"Hephaestus","2":"9","3":"4","4":"6"},{"1":"Hera","2":"10","3":"2","4":"2"},{"1":"Hermes","2":"11","3":"2","4":"4"},{"1":"Hestia","2":"12","3":"3","4":"3"},{"1":"Poseidon","2":"13","3":"4","4":"4"},{"1":"Zeus","2":"14","3":"2","4":"2"},{"1":"Aether","2":"15","3":"3","4":"3"},{"1":"Ananke","2":"16","3":"3","4":"3"},{"1":"Chaos","2":"17","3":"2","4":"3"},{"1":"Chronos","2":"18","3":"2","4":"5"},{"1":"Erebus","2":"19","3":"3","4":"3"},{"1":"Eros","2":"20","3":"2","4":"2"},{"1":"Hypnos","2":"21","3":"1","4":"5"},{"1":"Uranus","2":"22","3":"2","4":"4"},{"1":"Gaia","2":"23","3":"3","4":"1"},{"1":"Phanes","2":"24","3":"2","4":"4"},{"1":"Pontus","2":"25","3":"2","4":"4"},{"1":"Tartarus","2":"26","3":"3","4":"5"},{"1":"Thalassa","2":"27","3":"3","4":"5"},{"1":"Thanatos","2":"28","3":"3","4":"5"},{"1":"Hemera","2":"29","3":"3","4":"3"},{"1":"Nyx","2":"30","3":"0","4":"3"},{"1":"Nemesis","2":"31","3":"3","4":"4"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Задание
</div>
</div>
<div class="callout-body-container callout-body">
<p>Преобразуйте sentences из пакета <code>stringr</code> в тиббл; в новом столбце сохраните количество пробелов в каждом предложении.</p>
</div>
</div>
</section>
<section id="str_extract-str_subset-и-str_match" class="level2" data-number="7.10">
<h2 data-number="7.10" class="anchored" data-anchor-id="str_extract-str_subset-и-str_match"><span class="header-section-number">7.10</span> str_extract(), str_subset() и str_match()</h2>
<p>Функция <code>str_extract()</code> извлекает совпадения<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>.</p>
<p>Сначала зададим паттерн для поиска.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>colours <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">" red"</span>, <span class="st">"orange"</span>, <span class="st">"yellow"</span>, <span class="st">"green"</span>, <span class="st">"blue"</span>, <span class="st">"purple"</span>)</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>colour_match <span class="ot">&lt;-</span> <span class="fu">str_c</span>(colours, <span class="at">collapse =</span> <span class="st">"|"</span>)</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>colour_match</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " red|orange|yellow|green|blue|purple"</code></pre>
</div>
</div>
<p>И применим к предложениями. Используем <code>str_extract_all()</code>, т.к. <code>str_extract()</code> возвращает только первое вхождение.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>has_colour <span class="ot">&lt;-</span> <span class="fu">str_subset</span>(sentences, colour_match)</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>matches <span class="ot">&lt;-</span> <span class="fu">str_extract_all</span>(has_colour, colour_match)</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">unlist</span>(matches))</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "blue"   "blue"   "blue"   "yellow" "green"  " red"  </code></pre>
</div>
</div>
<p>Круглые скобки используются для группировки. Например, мы можем задать шаблон для поиска существительного или прилагательного с артиклем.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>noun <span class="ot">&lt;-</span> <span class="st">"(a|the) ([^ ]+)"</span> <span class="co"># как минимум один непробельный символ после пробела</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>has_noun <span class="ot">&lt;-</span> sentences <span class="sc">|&gt;</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_subset</span>(noun) <span class="sc">|&gt;</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>has_noun</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "The birch canoe slid on the smooth planks."       
 [2] "Glue the sheet to the dark blue background."      
 [3] "It's easy to tell the depth of a well."           
 [4] "These days a chicken leg is a rare dish."         
 [5] "The box was thrown beside the parked truck."      
 [6] "The boy was there when the sun rose."             
 [7] "The source of the huge river is the clear spring."
 [8] "Kick the ball straight and follow through."       
 [9] "Help the woman get back to her feet."             
[10] "A pot of tea helps to pass the evening."          </code></pre>
</div>
</div>
<p>Дальше можно воспользоваться уже известной функцией <code>str_extract()</code> или применить <code>str_match</code>. Результат будет немного отличаться: вторая функция вернет матрицу, в которой хранится не только сочетание слов, но и каждый компонент отдельно.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>has_noun <span class="sc">|&gt;</span> </span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(noun)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "the smooth" "the sheet"  "the depth"  "a chicken"  "the parked"
 [6] "the sun"    "the huge"   "the ball"   "the woman"  "a helps"   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>has_noun <span class="sc">|&gt;</span> </span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_match</span>(noun)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      [,1]         [,2]  [,3]     
 [1,] "the smooth" "the" "smooth" 
 [2,] "the sheet"  "the" "sheet"  
 [3,] "the depth"  "the" "depth"  
 [4,] "a chicken"  "a"   "chicken"
 [5,] "the parked" "the" "parked" 
 [6,] "the sun"    "the" "sun"    
 [7,] "the huge"   "the" "huge"   
 [8,] "the ball"   "the" "ball"   
 [9,] "the woman"  "the" "woman"  
[10,] "a helps"    "a"   "helps"  </code></pre>
</div>
</div>
<p>Функция <code>tidyr::extract()</code> работает похожим образом, но требует дать имена для каждого элемента группы. Этим удобно пользоваться, если ваши данные хранятся в виде тиббла.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">sentence =</span> sentences) <span class="sc">|&gt;</span> </span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">extract</span>(</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>    sentence, <span class="fu">c</span>(<span class="st">"article"</span>, <span class="st">"noun"</span>), <span class="st">"(a|the) ([^ ]+)"</span>, </span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove =</span> <span class="cn">FALSE</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["sentence"],"name":[1],"type":["chr"],"align":["left"]},{"label":["article"],"name":[2],"type":["chr"],"align":["left"]},{"label":["noun"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"The birch canoe slid on the smooth planks.","2":"the","3":"smooth"},{"1":"Glue the sheet to the dark blue background.","2":"the","3":"sheet"},{"1":"It's easy to tell the depth of a well.","2":"the","3":"depth"},{"1":"These days a chicken leg is a rare dish.","2":"a","3":"chicken"},{"1":"Rice is often served in round bowls.","2":"NA","3":"NA"},{"1":"The juice of lemons makes fine punch.","2":"NA","3":"NA"},{"1":"The box was thrown beside the parked truck.","2":"the","3":"parked"},{"1":"The hogs were fed chopped corn and garbage.","2":"NA","3":"NA"},{"1":"Four hours of steady work faced us.","2":"NA","3":"NA"},{"1":"A large size in stockings is hard to sell.","2":"NA","3":"NA"},{"1":"The boy was there when the sun rose.","2":"the","3":"sun"},{"1":"A rod is used to catch pink salmon.","2":"NA","3":"NA"},{"1":"The source of the huge river is the clear spring.","2":"the","3":"huge"},{"1":"Kick the ball straight and follow through.","2":"the","3":"ball"},{"1":"Help the woman get back to her feet.","2":"the","3":"woman"},{"1":"A pot of tea helps to pass the evening.","2":"a","3":"helps"},{"1":"Smoky fires lack flame and heat.","2":"NA","3":"NA"},{"1":"The soft cushion broke the man's fall.","2":"the","3":"man's"},{"1":"The salt breeze came across from the sea.","2":"the","3":"sea."},{"1":"The girl at the booth sold fifty bonds.","2":"the","3":"booth"},{"1":"The small pup gnawed a hole in the sock.","2":"a","3":"hole"},{"1":"The fish twisted and turned on the bent hook.","2":"the","3":"bent"},{"1":"Press the pants and sew a button on the vest.","2":"the","3":"pants"},{"1":"The swan dive was far short of perfect.","2":"NA","3":"NA"},{"1":"The beauty of the view stunned the young boy.","2":"the","3":"view"},{"1":"Two blue fish swam in the tank.","2":"the","3":"tank."},{"1":"Her purse was full of useless trash.","2":"NA","3":"NA"},{"1":"The colt reared and threw the tall rider.","2":"the","3":"tall"},{"1":"It snowed, rained, and hailed the same morning.","2":"the","3":"same"},{"1":"Read verse out loud for pleasure.","2":"NA","3":"NA"},{"1":"Hoist the load to your left shoulder.","2":"the","3":"load"},{"1":"Take the winding path to reach the lake.","2":"the","3":"winding"},{"1":"Note closely the size of the gas tank.","2":"the","3":"size"},{"1":"Wipe the grease off his dirty face.","2":"the","3":"grease"},{"1":"Mend the coat before you go out.","2":"the","3":"coat"},{"1":"The wrist was badly strained and hung limp.","2":"NA","3":"NA"},{"1":"The stray cat gave birth to kittens.","2":"NA","3":"NA"},{"1":"The young girl gave no clear response.","2":"NA","3":"NA"},{"1":"The meal was cooked before the bell rang.","2":"the","3":"bell"},{"1":"What joy there is in living.","2":"NA","3":"NA"},{"1":"A king ruled the state in the early days.","2":"the","3":"state"},{"1":"The ship was torn apart on the sharp reef.","2":"the","3":"sharp"},{"1":"Sickness kept him home the third week.","2":"the","3":"third"},{"1":"The wide road shimmered in the hot sun.","2":"the","3":"hot"},{"1":"The lazy cow lay in the cool grass.","2":"the","3":"cool"},{"1":"Lift the square stone over the fence.","2":"the","3":"square"},{"1":"The rope will bind the seven books at once.","2":"the","3":"seven"},{"1":"Hop over the fence and plunge in.","2":"the","3":"fence"},{"1":"The friendly gang left the drug store.","2":"the","3":"drug"},{"1":"Mesh wire keeps chicks inside.","2":"NA","3":"NA"},{"1":"The frosty air passed through the coat.","2":"the","3":"coat."},{"1":"The crooked maze failed to fool the mouse.","2":"the","3":"mouse."},{"1":"Adding fast leads to wrong sums.","2":"NA","3":"NA"},{"1":"The show was a flop from the very start.","2":"a","3":"flop"},{"1":"A saw is a tool used for making boards.","2":"a","3":"tool"},{"1":"The wagon moved on well oiled wheels.","2":"NA","3":"NA"},{"1":"March the soldiers past the next hill.","2":"the","3":"soldiers"},{"1":"A cup of sugar makes sweet fudge.","2":"NA","3":"NA"},{"1":"Place a rosebush near the porch steps.","2":"a","3":"rosebush"},{"1":"Both lost their lives in the raging storm.","2":"the","3":"raging"},{"1":"We talked of the side show in the circus.","2":"the","3":"side"},{"1":"Use a pencil to write the first draft.","2":"a","3":"pencil"},{"1":"He ran half way to the hardware store.","2":"the","3":"hardware"},{"1":"The clock struck to mark the third period.","2":"the","3":"third"},{"1":"A small creek cut across the field.","2":"the","3":"field."},{"1":"Cars and busses stalled in snow drifts.","2":"NA","3":"NA"},{"1":"The set of china hit the floor with a crash.","2":"a","3":"hit"},{"1":"This is a grand season for hikes on the road.","2":"a","3":"grand"},{"1":"The dune rose from the edge of the water.","2":"the","3":"edge"},{"1":"Those words were the cue for the actor to leave.","2":"the","3":"cue"},{"1":"A yacht slid around the point into the bay.","2":"the","3":"point"},{"1":"The two met while playing on the sand.","2":"the","3":"sand."},{"1":"The ink stain dried on the finished page.","2":"the","3":"finished"},{"1":"The walled town was seized without a fight.","2":"a","3":"fight."},{"1":"The lease ran out in sixteen weeks.","2":"NA","3":"NA"},{"1":"A tame squirrel makes a nice pet.","2":"a","3":"nice"},{"1":"The horn of the car woke the sleeping cop.","2":"the","3":"car"},{"1":"The heart beat strongly and with firm strokes.","2":"NA","3":"NA"},{"1":"The pearl was worn in a thin silver ring.","2":"a","3":"thin"},{"1":"The fruit peel was cut in thick slices.","2":"NA","3":"NA"},{"1":"The Navy attacked the big task force.","2":"the","3":"big"},{"1":"See the cat glaring at the scared mouse.","2":"the","3":"cat"},{"1":"There are more than two factors here.","2":"NA","3":"NA"},{"1":"The hat brim was wide and too droopy.","2":"NA","3":"NA"},{"1":"The lawyer tried to lose his case.","2":"NA","3":"NA"},{"1":"The grass curled around the fence post.","2":"the","3":"fence"},{"1":"Cut the pie into large parts.","2":"the","3":"pie"},{"1":"Men strive but seldom get rich.","2":"NA","3":"NA"},{"1":"Always close the barn door tight.","2":"the","3":"barn"},{"1":"He lay prone and hardly moved a limb.","2":"a","3":"limb."},{"1":"The slush lay deep along the street.","2":"the","3":"street."},{"1":"A wisp of cloud hung in the blue air.","2":"the","3":"blue"},{"1":"A pound of sugar costs more than eggs.","2":"NA","3":"NA"},{"1":"The fin was sharp and cut the clear water.","2":"the","3":"clear"},{"1":"The play seems dull and quite stupid.","2":"NA","3":"NA"},{"1":"Bail the boat to stop it from sinking.","2":"the","3":"boat"},{"1":"The term ended in late june that year.","2":"NA","3":"NA"},{"1":"A Tusk is used to make costly gifts.","2":"NA","3":"NA"},{"1":"Ten pins were set in order.","2":"NA","3":"NA"},{"1":"The bill was paid every third week.","2":"NA","3":"NA"},{"1":"Oak is strong and also gives shade.","2":"NA","3":"NA"},{"1":"Cats and Dogs each hate the other.","2":"the","3":"other."},{"1":"The pipe began to rust while new.","2":"NA","3":"NA"},{"1":"Open the crate but don't break the glass.","2":"the","3":"crate"},{"1":"Add the sum to the product of these three.","2":"the","3":"sum"},{"1":"Thieves who rob friends deserve jail.","2":"NA","3":"NA"},{"1":"The ripe taste of cheese improves with age.","2":"NA","3":"NA"},{"1":"Act on these orders with great speed.","2":"NA","3":"NA"},{"1":"The hog crawled under the high fence.","2":"the","3":"high"},{"1":"Move the vat over the hot fire.","2":"the","3":"vat"},{"1":"The bark of the pine tree was shiny and dark.","2":"the","3":"pine"},{"1":"Leaves turn brown and yellow in the fall.","2":"the","3":"fall."},{"1":"The pennant waved when the wind blew.","2":"the","3":"wind"},{"1":"Split the log with a quick, sharp blow.","2":"the","3":"log"},{"1":"Burn peat after the logs give out.","2":"the","3":"logs"},{"1":"He ordered peach pie with ice cream.","2":"NA","3":"NA"},{"1":"Weave the carpet on the right hand side.","2":"the","3":"carpet"},{"1":"Hemp is a weed found in parts of the tropics.","2":"a","3":"weed"},{"1":"A lame back kept his score low.","2":"NA","3":"NA"},{"1":"We find joy in the simplest things.","2":"the","3":"simplest"},{"1":"Type out three lists of orders.","2":"NA","3":"NA"},{"1":"The harder he tried the less he got done.","2":"the","3":"less"},{"1":"The boss ran the show with a watchful eye.","2":"the","3":"show"},{"1":"The cup cracked and spilled its contents.","2":"NA","3":"NA"},{"1":"Paste can cleanse the most dirty brass.","2":"the","3":"most"},{"1":"The slang word for raw whiskey is booze.","2":"NA","3":"NA"},{"1":"It caught its hind paw in a rusty trap.","2":"a","3":"rusty"},{"1":"The wharf could be seen at the farther shore.","2":"the","3":"farther"},{"1":"Feel the heat of the weak dying flame.","2":"the","3":"heat"},{"1":"The tiny girl took off her hat.","2":"NA","3":"NA"},{"1":"A cramp is no small danger on a swim.","2":"a","3":"swim."},{"1":"He said the same phrase thirty times.","2":"the","3":"same"},{"1":"Pluck the bright rose without leaves.","2":"the","3":"bright"},{"1":"Two plus seven is less than ten.","2":"NA","3":"NA"},{"1":"The glow deepened in the eyes of the sweet girl.","2":"the","3":"eyes"},{"1":"Bring your problems to the wise chief.","2":"the","3":"wise"},{"1":"Write a fond note to the friend you cherish.","2":"a","3":"fond"},{"1":"Clothes and lodging are free to new men.","2":"NA","3":"NA"},{"1":"We frown when events take a bad turn.","2":"a","3":"bad"},{"1":"Port is a strong wine with a smoky taste.","2":"a","3":"strong"},{"1":"The young kid jumped the rusty gate.","2":"the","3":"rusty"},{"1":"Guess the result from the first scores.","2":"the","3":"result"},{"1":"A salt pickle tastes fine with ham.","2":"NA","3":"NA"},{"1":"The just claim got the right verdict.","2":"the","3":"right"},{"1":"Those thistles bend in a high wind.","2":"a","3":"high"},{"1":"Pure bred poodles have curls.","2":"NA","3":"NA"},{"1":"The tree top waved in a graceful way.","2":"a","3":"graceful"},{"1":"The spot on the blotter was made by green ink.","2":"the","3":"blotter"},{"1":"Mud was spattered on the front of his white shirt.","2":"the","3":"front"},{"1":"The cigar burned a hole in the desk top.","2":"a","3":"hole"},{"1":"The empty flask stood on the tin tray.","2":"the","3":"tin"},{"1":"A speedy man can beat this track mark.","2":"NA","3":"NA"},{"1":"He broke a new shoelace that day.","2":"a","3":"new"},{"1":"The coffee stand is too high for the couch.","2":"the","3":"couch."},{"1":"The urge to write short stories is rare.","2":"NA","3":"NA"},{"1":"The pencils have all been used.","2":"NA","3":"NA"},{"1":"The pirates seized the crew of the lost ship.","2":"the","3":"crew"},{"1":"We tried to replace the coin but failed.","2":"the","3":"coin"},{"1":"She sewed the torn coat quite neatly.","2":"the","3":"torn"},{"1":"The sofa cushion is red and of light weight.","2":"a","3":"cushion"},{"1":"The jacket hung on the back of the wide chair.","2":"the","3":"back"},{"1":"At that high level the air is pure.","2":"the","3":"air"},{"1":"Drop the two when you add the figures.","2":"the","3":"two"},{"1":"A filing case is now hard to buy.","2":"NA","3":"NA"},{"1":"An abrupt start does not win the prize.","2":"the","3":"prize."},{"1":"Wood is best for making toys and blocks.","2":"NA","3":"NA"},{"1":"The office paint was a dull, sad tan.","2":"a","3":"dull,"},{"1":"He knew the skill of the great young actress.","2":"the","3":"skill"},{"1":"A rag will soak up spilled water.","2":"NA","3":"NA"},{"1":"A shower of dirt fell from the hot pipes.","2":"the","3":"hot"},{"1":"Steam hissed from the broken valve.","2":"the","3":"broken"},{"1":"The child almost hurt the small dog.","2":"the","3":"small"},{"1":"There was a sound of dry leaves outside.","2":"a","3":"sound"},{"1":"The sky that morning was clear and bright blue.","2":"NA","3":"NA"},{"1":"Torn scraps littered the stone floor.","2":"the","3":"stone"},{"1":"Sunday is the best part of the week.","2":"the","3":"best"},{"1":"The doctor cured him with these pills.","2":"NA","3":"NA"},{"1":"The new girl was fired today at noon.","2":"NA","3":"NA"},{"1":"They felt gay when the ship arrived in port.","2":"the","3":"ship"},{"1":"Add the store's account to the last cent.","2":"the","3":"store's"},{"1":"Acid burns holes in wool cloth.","2":"NA","3":"NA"},{"1":"Fairy tales should be fun to write.","2":"NA","3":"NA"},{"1":"Eight miles of woodland burned to waste.","2":"NA","3":"NA"},{"1":"The third act was dull and tired the players.","2":"the","3":"players."},{"1":"A young child should not suffer fright.","2":"NA","3":"NA"},{"1":"Add the column and put the sum here.","2":"the","3":"column"},{"1":"We admire and love a good cook.","2":"a","3":"good"},{"1":"There the flood mark is ten inches.","2":"the","3":"flood"},{"1":"He carved a head from the round block of marble.","2":"a","3":"head"},{"1":"She has a smart way of wearing clothes.","2":"a","3":"smart"},{"1":"The fruit of a fig tree is apple shaped.","2":"a","3":"fig"},{"1":"Corn cobs can be used to kindle a fire.","2":"a","3":"fire."},{"1":"Where were they when the noise started.","2":"the","3":"noise"},{"1":"The paper box is full of thumb tacks.","2":"NA","3":"NA"},{"1":"Sell your gift to a buyer at a good gain.","2":"a","3":"buyer"},{"1":"The tongs lay beside the ice pail.","2":"the","3":"ice"},{"1":"The petals fall with the next puff of wind.","2":"the","3":"next"},{"1":"Bring your best compass to the third class.","2":"the","3":"third"},{"1":"They could laugh although they were sad.","2":"NA","3":"NA"},{"1":"Farmers came in to thresh the oat crop.","2":"the","3":"oat"},{"1":"The brown house was on fire to the attic.","2":"the","3":"attic."},{"1":"The lure is used to catch trout and flounder.","2":"NA","3":"NA"},{"1":"Float the soap on top of the bath water.","2":"the","3":"soap"},{"1":"A blue crane is a tall wading bird.","2":"a","3":"tall"},{"1":"A fresh start will work such wonders.","2":"NA","3":"NA"},{"1":"The club rented the rink for the fifth night.","2":"the","3":"rink"},{"1":"After the dance, they went straight home.","2":"the","3":"dance,"},{"1":"The hostess taught the new maid to serve.","2":"the","3":"new"},{"1":"He wrote his last novel there at the inn.","2":"the","3":"inn."},{"1":"Even the worst will beat his low score.","2":"the","3":"worst"},{"1":"The cement had dried when he moved it.","2":"NA","3":"NA"},{"1":"The loss of the second ship was hard to take.","2":"the","3":"second"},{"1":"The fly made its way along the wall.","2":"the","3":"wall."},{"1":"Do that with a wooden stick.","2":"a","3":"wooden"},{"1":"Live wires should be kept covered.","2":"NA","3":"NA"},{"1":"The large house had hot water taps.","2":"NA","3":"NA"},{"1":"It is hard to erase blue or red ink.","2":"NA","3":"NA"},{"1":"Write at once or you may forget it.","2":"NA","3":"NA"},{"1":"The doorknob was made of bright clean brass.","2":"NA","3":"NA"},{"1":"The wreck occurred by the bank on Main Street.","2":"the","3":"bank"},{"1":"A pencil with black lead writes best.","2":"NA","3":"NA"},{"1":"Coax a young calf to drink from a bucket.","2":"a","3":"young"},{"1":"Schools for ladies teach charm and grace.","2":"NA","3":"NA"},{"1":"The lamp shone with a steady green flame.","2":"a","3":"steady"},{"1":"They took the axe and the saw to the forest.","2":"the","3":"axe"},{"1":"The ancient coin was quite dull and worn.","2":"NA","3":"NA"},{"1":"The shaky barn fell with a loud crash.","2":"a","3":"loud"},{"1":"Jazz and swing fans like fast music.","2":"NA","3":"NA"},{"1":"Rake the rubbish up and then burn it.","2":"the","3":"rubbish"},{"1":"Slash the gold cloth into fine ribbons.","2":"the","3":"gold"},{"1":"Try to have the court decide the case.","2":"the","3":"court"},{"1":"They are pushed back each time they attack.","2":"NA","3":"NA"},{"1":"He broke his ties with groups of former friends.","2":"NA","3":"NA"},{"1":"They floated on the raft to sun their white backs.","2":"the","3":"raft"},{"1":"The map had an X that meant nothing.","2":"NA","3":"NA"},{"1":"Whitings are small fish caught in nets.","2":"NA","3":"NA"},{"1":"Some ads serve to cheat buyers.","2":"NA","3":"NA"},{"1":"Jerk the rope and the bell rings weakly.","2":"the","3":"rope"},{"1":"A waxed floor makes us lose balance.","2":"NA","3":"NA"},{"1":"Madam, this is the best brand of corn.","2":"the","3":"best"},{"1":"On the islands the sea breeze is soft and mild.","2":"the","3":"islands"},{"1":"The play began as soon as we sat down.","2":"NA","3":"NA"},{"1":"This will lead the world to more sound and fury.","2":"the","3":"world"},{"1":"Add salt before you fry the egg.","2":"the","3":"egg."},{"1":"The rush for funds reached its peak Tuesday.","2":"NA","3":"NA"},{"1":"The birch looked stark white and lonesome.","2":"NA","3":"NA"},{"1":"The box is held by a bright red snapper.","2":"a","3":"bright"},{"1":"To make pure ice, you freeze water.","2":"NA","3":"NA"},{"1":"The first worm gets snapped early.","2":"NA","3":"NA"},{"1":"Jump the fence and hurry up the bank.","2":"the","3":"fence"},{"1":"Yell and clap as the curtain slides back.","2":"the","3":"curtain"},{"1":"They are men who walk the middle of the road.","2":"the","3":"middle"},{"1":"Both brothers wear the same size.","2":"the","3":"same"},{"1":"In some form or other we need fun.","2":"NA","3":"NA"},{"1":"The prince ordered his head chopped off.","2":"NA","3":"NA"},{"1":"The houses are built of red clay bricks.","2":"NA","3":"NA"},{"1":"Ducks fly north but lack a compass.","2":"a","3":"compass."},{"1":"Fruit flavors are used in fizz drinks.","2":"NA","3":"NA"},{"1":"These pills do less good than others.","2":"NA","3":"NA"},{"1":"Canned pears lack full flavor.","2":"NA","3":"NA"},{"1":"The dark pot hung in the front closet.","2":"the","3":"front"},{"1":"Carry the pail to the wall and spill it there.","2":"the","3":"pail"},{"1":"The train brought our hero to the big town.","2":"the","3":"big"},{"1":"We are sure that one war is enough.","2":"NA","3":"NA"},{"1":"Gray paint stretched for miles around.","2":"NA","3":"NA"},{"1":"The rude laugh filled the empty room.","2":"the","3":"empty"},{"1":"High seats are best for football fans.","2":"NA","3":"NA"},{"1":"Tea served from the brown jug is tasty.","2":"a","3":"served"},{"1":"A dash of pepper spoils beef stew.","2":"NA","3":"NA"},{"1":"A zestful food is the hot-cross bun.","2":"the","3":"hot-cross"},{"1":"The horse trotted around the field at a brisk pace.","2":"the","3":"field"},{"1":"Find the twin who stole the pearl necklace.","2":"the","3":"twin"},{"1":"Cut the cord that binds the box tightly.","2":"the","3":"cord"},{"1":"The red tape bound the smuggled food.","2":"the","3":"smuggled"},{"1":"Look in the corner to find the tan shirt.","2":"the","3":"corner"},{"1":"The cold drizzle will halt the bond drive.","2":"the","3":"bond"},{"1":"Nine men were hired to dig the ruins.","2":"the","3":"ruins."},{"1":"The junk yard had a mouldy smell.","2":"a","3":"mouldy"},{"1":"The flint sputtered and lit a pine torch.","2":"a","3":"pine"},{"1":"Soak the cloth and drown the sharp odor.","2":"the","3":"cloth"},{"1":"The shelves were bare of both jam or crackers.","2":"NA","3":"NA"},{"1":"A joy to every child is the swan boat.","2":"the","3":"swan"},{"1":"All sat frozen and watched the screen.","2":"the","3":"screen."},{"1":"A cloud of dust stung his tender eyes.","2":"NA","3":"NA"},{"1":"To reach the end he needs much courage.","2":"the","3":"end"},{"1":"Shape the clay gently into block form.","2":"the","3":"clay"},{"1":"A ridge on a smooth surface is a bump or flaw.","2":"a","3":"smooth"},{"1":"Hedge apples may stain your hands green.","2":"NA","3":"NA"},{"1":"Quench your thirst, then eat the crackers.","2":"the","3":"crackers."},{"1":"Tight curls get limp on rainy days.","2":"NA","3":"NA"},{"1":"The mute muffled the high tones of the horn.","2":"the","3":"high"},{"1":"The gold ring fits only a pierced ear.","2":"a","3":"pierced"},{"1":"The old pan was covered with hard fudge.","2":"NA","3":"NA"},{"1":"Watch the log float in the wide river.","2":"the","3":"log"},{"1":"The node on the stalk of wheat grew daily.","2":"the","3":"stalk"},{"1":"The heap of fallen leaves was set on fire.","2":"NA","3":"NA"},{"1":"Write fast if you want to finish early.","2":"NA","3":"NA"},{"1":"His shirt was clean but one button was gone.","2":"NA","3":"NA"},{"1":"The barrel of beer was a brew of malt and hops.","2":"a","3":"brew"},{"1":"Tin cans are absent from store shelves.","2":"NA","3":"NA"},{"1":"Slide the box into that empty space.","2":"the","3":"box"},{"1":"The plant grew large and green in the window.","2":"the","3":"window."},{"1":"The beam dropped down on the workman's head.","2":"the","3":"workman's"},{"1":"Pink clouds floated with the breeze.","2":"the","3":"breeze."},{"1":"She danced like a swan, tall and graceful.","2":"a","3":"swan,"},{"1":"The tube was blown and the tire flat and useless.","2":"the","3":"tire"},{"1":"It is late morning on the old wall clock.","2":"the","3":"old"},{"1":"Let's all join as we sing the last chorus.","2":"the","3":"last"},{"1":"The last switch cannot be turned off.","2":"NA","3":"NA"},{"1":"The fight will end in just six minutes.","2":"NA","3":"NA"},{"1":"The store walls were lined with colored frocks.","2":"NA","3":"NA"},{"1":"The peace league met to discuss their plans.","2":"NA","3":"NA"},{"1":"The rise to fame of a person takes luck.","2":"a","3":"person"},{"1":"Paper is scarce, so write with much care.","2":"NA","3":"NA"},{"1":"The quick fox jumped on the sleeping cat.","2":"the","3":"sleeping"},{"1":"The nozzle of the fire hose was bright brass.","2":"the","3":"fire"},{"1":"Screw the round cap on as tight as needed.","2":"the","3":"round"},{"1":"Time brings us many changes.","2":"NA","3":"NA"},{"1":"The purple tie was ten years old.","2":"NA","3":"NA"},{"1":"Men think and plan and sometimes act.","2":"NA","3":"NA"},{"1":"Fill the ink jar with sticky glue.","2":"the","3":"ink"},{"1":"He smoke a big pipe with strong contents.","2":"a","3":"big"},{"1":"We need grain to keep our mules healthy.","2":"NA","3":"NA"},{"1":"Pack the records in a neat thin case.","2":"the","3":"records"},{"1":"The crunch of feet in the snow was the only sound.","2":"the","3":"snow"},{"1":"The copper bowl shone in the sun's rays.","2":"the","3":"sun's"},{"1":"Boards will warp unless kept dry.","2":"NA","3":"NA"},{"1":"The plush chair leaned against the wall.","2":"the","3":"wall."},{"1":"Glass will clink when struck by metal.","2":"NA","3":"NA"},{"1":"Bathe and relax in the cool green grass.","2":"the","3":"and"},{"1":"Nine rows of soldiers stood in a line.","2":"a","3":"line."},{"1":"The beach is dry and shallow at low tide.","2":"NA","3":"NA"},{"1":"The idea is to sew both edges straight.","2":"a","3":"is"},{"1":"The kitten chased the dog down the street.","2":"the","3":"dog"},{"1":"Pages bound in cloth make a book.","2":"a","3":"book."},{"1":"Try to trace the fine lines of the painting.","2":"the","3":"fine"},{"1":"Women form less than half of the group.","2":"the","3":"group."},{"1":"The zones merge in the central part of town.","2":"the","3":"central"},{"1":"A gem in the rough needs work to polish.","2":"the","3":"rough"},{"1":"Code is used when secrets are sent.","2":"NA","3":"NA"},{"1":"Most of the news is easy for us to hear.","2":"the","3":"news"},{"1":"He used the lathe to make brass objects.","2":"the","3":"lathe"},{"1":"The vane on top of the pole revolved in the wind.","2":"the","3":"pole"},{"1":"Mince pie is a dish served to children.","2":"a","3":"dish"},{"1":"The clan gathered on each dull night.","2":"NA","3":"NA"},{"1":"Let it burn, it gives us warmth and comfort.","2":"NA","3":"NA"},{"1":"A castle built from sand fails to endure.","2":"NA","3":"NA"},{"1":"A child's wit saved the day for us.","2":"the","3":"day"},{"1":"Tack the strip of carpet to the worn floor.","2":"the","3":"strip"},{"1":"Next Tuesday we must vote.","2":"NA","3":"NA"},{"1":"Pour the stew from the pot into the plate.","2":"the","3":"stew"},{"1":"Each penny shone like new.","2":"NA","3":"NA"},{"1":"The man went to the woods to gather sticks.","2":"the","3":"woods"},{"1":"The dirt piles were lines along the road.","2":"the","3":"road."},{"1":"The logs fell and tumbled into the clear stream.","2":"the","3":"clear"},{"1":"Just hoist it up and take it away.","2":"NA","3":"NA"},{"1":"A ripe plum is fit for a king's palate.","2":"a","3":"king's"},{"1":"Our plans right now are hazy.","2":"NA","3":"NA"},{"1":"Brass rings are sold by these natives.","2":"NA","3":"NA"},{"1":"It takes a good trap to capture a bear.","2":"a","3":"good"},{"1":"Feed the white mouse some flower seeds.","2":"the","3":"white"},{"1":"The thaw came early and freed the stream.","2":"the","3":"stream."},{"1":"He took the lead and kept it the whole distance.","2":"the","3":"lead"},{"1":"The key you designed will fit the lock.","2":"the","3":"lock."},{"1":"Plead to the council to free the poor thief.","2":"the","3":"council"},{"1":"Better hash is made of rare beef.","2":"NA","3":"NA"},{"1":"This plank was made for walking on .","2":"NA","3":"NA"},{"1":"The lake sparkled in the red hot sun.","2":"the","3":"red"},{"1":"He crawled with care along the ledge.","2":"the","3":"ledge."},{"1":"Tend the sheep while the dog wanders.","2":"the","3":"sheep"},{"1":"It takes a lot of help to finish these.","2":"a","3":"lot"},{"1":"Mark the spot with a sign painted red.","2":"the","3":"spot"},{"1":"Take two shares as a fair profit.","2":"a","3":"fair"},{"1":"The fur of cats goes by many names.","2":"NA","3":"NA"},{"1":"North winds bring colds and fevers.","2":"NA","3":"NA"},{"1":"He asks no person to vouch for him.","2":"NA","3":"NA"},{"1":"Go now and come here later.","2":"NA","3":"NA"},{"1":"A sash of gold silk will trim her dress.","2":"NA","3":"NA"},{"1":"Soap can wash most dirt away.","2":"NA","3":"NA"},{"1":"That move means the game is over.","2":"the","3":"game"},{"1":"He wrote down a long list of items.","2":"a","3":"long"},{"1":"A siege will crack the strong defense.","2":"the","3":"strong"},{"1":"Grape juice and water mix well.","2":"NA","3":"NA"},{"1":"Roads are paved with sticky tar.","2":"NA","3":"NA"},{"1":"Fake stones shine but cost little.","2":"NA","3":"NA"},{"1":"The drip of the rain made a pleasant sound.","2":"the","3":"rain"},{"1":"Smoke poured out of every crack.","2":"NA","3":"NA"},{"1":"Serve the hot rum to the tired heroes.","2":"the","3":"hot"},{"1":"Much of the story makes good sense.","2":"the","3":"story"},{"1":"The sun came up to light the eastern sky.","2":"the","3":"eastern"},{"1":"Heave the line over the port side.","2":"the","3":"line"},{"1":"A lathe cuts and trims any wood.","2":"the","3":"cuts"},{"1":"It's a dense crowd in two distinct ways.","2":"a","3":"dense"},{"1":"His hip struck the knee of the next player.","2":"the","3":"knee"},{"1":"The stale smell of old beer lingers.","2":"NA","3":"NA"},{"1":"The desk was firm on the shaky floor.","2":"the","3":"shaky"},{"1":"It takes heat to bring out the odor.","2":"the","3":"odor."},{"1":"Beef is scarcer than some lamb.","2":"NA","3":"NA"},{"1":"Raise the sail and steer the ship northward.","2":"the","3":"sail"},{"1":"A cone costs five cents on Mondays.","2":"NA","3":"NA"},{"1":"A pod is what peas always grow in.","2":"NA","3":"NA"},{"1":"Jerk that dart from the cork target.","2":"the","3":"cork"},{"1":"No cement will hold hard wood.","2":"NA","3":"NA"},{"1":"We now have a new base for shipping.","2":"a","3":"new"},{"1":"A list of names is carved around the base.","2":"the","3":"base."},{"1":"The sheep were led home by a dog.","2":"a","3":"dog."},{"1":"Three for a dime, the young peddler cried.","2":"a","3":"dime,"},{"1":"The sense of smell is better than that of touch.","2":"NA","3":"NA"},{"1":"No hardship seemed to make him sad.","2":"NA","3":"NA"},{"1":"Grace makes up for lack of beauty.","2":"NA","3":"NA"},{"1":"Nudge gently but wake her now.","2":"NA","3":"NA"},{"1":"The news struck doubt into restless minds.","2":"NA","3":"NA"},{"1":"Once we stood beside the shore.","2":"the","3":"shore."},{"1":"A chink in the wall allowed a draft to blow.","2":"the","3":"wall"},{"1":"Fasten two pins on each side.","2":"NA","3":"NA"},{"1":"A cold dip restores health and zest.","2":"NA","3":"NA"},{"1":"He takes the oath of office each March.","2":"the","3":"oath"},{"1":"The sand drifts over the sills of the old house.","2":"the","3":"sills"},{"1":"The point of the steel pen was bent and twisted.","2":"the","3":"steel"},{"1":"There is a lag between thought and act.","2":"a","3":"lag"},{"1":"Seed is needed to plant the spring corn.","2":"the","3":"spring"},{"1":"Draw the chart with heavy black lines.","2":"the","3":"chart"},{"1":"The boy owed his pal thirty cents.","2":"NA","3":"NA"},{"1":"The chap slipped into the crowd and was lost.","2":"the","3":"crowd"},{"1":"Hats are worn to tea and not to dinner.","2":"a","3":"and"},{"1":"The ramp led up to the wide highway.","2":"the","3":"wide"},{"1":"Beat the dust from the rug onto the lawn.","2":"the","3":"dust"},{"1":"Say it slowly but make it ring clear.","2":"NA","3":"NA"},{"1":"The straw nest housed five robins.","2":"NA","3":"NA"},{"1":"Screen the porch with woven straw mats.","2":"the","3":"porch"},{"1":"This horse will nose his way to the finish.","2":"the","3":"finish."},{"1":"The dry wax protects the deep scratch.","2":"the","3":"deep"},{"1":"He picked up the dice for a second roll.","2":"the","3":"dice"},{"1":"These coins will be needed to pay his debt.","2":"NA","3":"NA"},{"1":"The nag pulled the frail cart along.","2":"the","3":"frail"},{"1":"Twist the valve and release hot steam.","2":"the","3":"valve"},{"1":"The vamp of the shoe had a gold buckle.","2":"the","3":"shoe"},{"1":"The smell of burned rags itches my nose.","2":"NA","3":"NA"},{"1":"New pants lack cuffs and pockets.","2":"NA","3":"NA"},{"1":"The marsh will freeze when cold enough.","2":"NA","3":"NA"},{"1":"They slice the sausage thin with a knife.","2":"the","3":"sausage"},{"1":"The bloom of the rose lasts a few days.","2":"the","3":"rose"},{"1":"A gray mare walked before the colt.","2":"the","3":"colt."},{"1":"Breakfast buns are fine with a hot drink.","2":"a","3":"hot"},{"1":"Bottles hold four kinds of rum.","2":"NA","3":"NA"},{"1":"The man wore a feather in his felt hat.","2":"a","3":"feather"},{"1":"He wheeled the bike past the winding road.","2":"the","3":"bike"},{"1":"Drop the ashes on the worn old rug.","2":"the","3":"ashes"},{"1":"The desk and both chairs were painted tan.","2":"NA","3":"NA"},{"1":"Throw out the used paper cup and plate.","2":"the","3":"used"},{"1":"A clean neck means a neat collar.","2":"a","3":"neat"},{"1":"The couch cover and hall drapes were blue.","2":"NA","3":"NA"},{"1":"The stems of the tall glasses cracked and broke.","2":"the","3":"tall"},{"1":"The wall phone rang loud and often.","2":"NA","3":"NA"},{"1":"The clothes dried on a thin wooden rack.","2":"a","3":"thin"},{"1":"Turn out the lantern which gives us light.","2":"the","3":"lantern"},{"1":"The cleat sank deeply into the soft turf.","2":"the","3":"soft"},{"1":"The bills were mailed promptly on the tenth of the month.","2":"the","3":"tenth"},{"1":"To have is better than to wait and hope.","2":"NA","3":"NA"},{"1":"The price is fair for a good antique clock.","2":"a","3":"good"},{"1":"The music played on while they talked.","2":"NA","3":"NA"},{"1":"Dispense with a vest on a day like this.","2":"a","3":"vest"},{"1":"The bunch of grapes was pressed into wine.","2":"NA","3":"NA"},{"1":"He sent the figs, but kept the ripe cherries.","2":"the","3":"figs,"},{"1":"The hinge on the door creaked with old age.","2":"the","3":"door"},{"1":"The screen before the fire kept in the sparks.","2":"the","3":"fire"},{"1":"Fly by night and you waste little time.","2":"NA","3":"NA"},{"1":"Thick glasses helped him read the print.","2":"the","3":"print."},{"1":"Birth and death marks the limits of life.","2":"the","3":"limits"},{"1":"The chair looked strong but had no bottom.","2":"NA","3":"NA"},{"1":"The kite flew wildly in the high wind.","2":"the","3":"high"},{"1":"A fur muff is stylish once more.","2":"NA","3":"NA"},{"1":"The tin box held priceless stones.","2":"NA","3":"NA"},{"1":"We need an end of all such matter.","2":"NA","3":"NA"},{"1":"The case was puzzling to the old and wise.","2":"the","3":"old"},{"1":"The bright lanterns were gay on the dark lawn.","2":"the","3":"dark"},{"1":"We don't get much money but we have fun.","2":"NA","3":"NA"},{"1":"The youth drove with zest, but little skill.","2":"NA","3":"NA"},{"1":"Five years he lived with a shaggy dog.","2":"a","3":"shaggy"},{"1":"A fence cuts through the corner lot.","2":"the","3":"corner"},{"1":"The way to save money is not to spend much.","2":"NA","3":"NA"},{"1":"Shut the hatch before the waves push it in.","2":"the","3":"hatch"},{"1":"The odor of spring makes young hearts jump.","2":"NA","3":"NA"},{"1":"Crack the walnut with your sharp side teeth.","2":"the","3":"walnut"},{"1":"He offered proof in the form of a large chart.","2":"the","3":"form"},{"1":"Send the stuff in a thick paper bag.","2":"the","3":"stuff"},{"1":"A quart of milk is water for the most part.","2":"the","3":"most"},{"1":"They told wild tales to frighten him.","2":"NA","3":"NA"},{"1":"The three story house was built of stone.","2":"NA","3":"NA"},{"1":"In the rear of the ground floor was a large passage.","2":"the","3":"rear"},{"1":"A man in a blue sweater sat at the desk.","2":"a","3":"blue"},{"1":"Oats are a food eaten by horse and man.","2":"a","3":"food"},{"1":"Their eyelids droop for want of sleep.","2":"NA","3":"NA"},{"1":"A sip of tea revives his tired friend.","2":"a","3":"revives"},{"1":"There are many ways to do these things.","2":"NA","3":"NA"},{"1":"Tuck the sheet under the edge of the mat.","2":"the","3":"sheet"},{"1":"A force equal to that would move the earth.","2":"the","3":"earth."},{"1":"We like to see clear weather.","2":"NA","3":"NA"},{"1":"The work of the tailor is seen on each side.","2":"the","3":"tailor"},{"1":"Take a chance and win a china doll.","2":"a","3":"chance"},{"1":"Shake the dust from your shoes, stranger.","2":"the","3":"dust"},{"1":"She was kind to sick old people.","2":"NA","3":"NA"},{"1":"The square wooden crate was packed to be shipped.","2":"NA","3":"NA"},{"1":"The dusty bench stood by the stone wall.","2":"the","3":"stone"},{"1":"We dress to suit the weather of most days.","2":"the","3":"weather"},{"1":"Smile when you say nasty words.","2":"NA","3":"NA"},{"1":"A bowl of rice is free with chicken stew.","2":"NA","3":"NA"},{"1":"The water in this well is a source of good health.","2":"a","3":"source"},{"1":"Take shelter in this tent, but keep still.","2":"NA","3":"NA"},{"1":"That guy is the writer of a few banned books.","2":"the","3":"writer"},{"1":"The little tales they tell are false.","2":"NA","3":"NA"},{"1":"The door was barred, locked, and bolted as well.","2":"NA","3":"NA"},{"1":"Ripe pears are fit for a queen's table.","2":"a","3":"queen's"},{"1":"A big wet stain was on the round carpet.","2":"the","3":"round"},{"1":"The kite dipped and swayed, but stayed aloft.","2":"NA","3":"NA"},{"1":"The pleasant hours fly by much too soon.","2":"NA","3":"NA"},{"1":"The room was crowded with a wild mob.","2":"a","3":"wild"},{"1":"This strong arm shall shield your honor.","2":"NA","3":"NA"},{"1":"She blushed when he gave her a white orchid.","2":"a","3":"white"},{"1":"The beetle droned in the hot June sun.","2":"the","3":"hot"},{"1":"Press the pedal with your left foot.","2":"the","3":"pedal"},{"1":"Neat plans fail without luck.","2":"NA","3":"NA"},{"1":"The black trunk fell from the landing.","2":"the","3":"landing."},{"1":"The bank pressed for payment of the debt.","2":"the","3":"debt."},{"1":"The theft of the pearl pin was kept secret.","2":"the","3":"pearl"},{"1":"Shake hands with this friendly child.","2":"NA","3":"NA"},{"1":"The vast space stretched into the far distance.","2":"the","3":"far"},{"1":"A rich farm is rare in this sandy waste.","2":"NA","3":"NA"},{"1":"His wide grin earned many friends.","2":"NA","3":"NA"},{"1":"Flax makes a fine brand of paper.","2":"a","3":"fine"},{"1":"Hurdle the pit with the aid of a long pole.","2":"the","3":"pit"},{"1":"A strong bid may scare your partner stiff.","2":"NA","3":"NA"},{"1":"Even a just cause needs power to win.","2":"a","3":"just"},{"1":"Peep under the tent and see the clowns.","2":"the","3":"tent"},{"1":"The leaf drifts along with a slow spin.","2":"a","3":"slow"},{"1":"Cheap clothes are flashy but don't last.","2":"NA","3":"NA"},{"1":"A thing of small note can cause despair.","2":"NA","3":"NA"},{"1":"Flood the mails with requests for this book.","2":"the","3":"mails"},{"1":"A thick coat of black paint covered all.","2":"NA","3":"NA"},{"1":"The pencil was cut to be sharp at both ends.","2":"NA","3":"NA"},{"1":"Those last words were a strong statement.","2":"a","3":"strong"},{"1":"He wrote his name boldly at the top of the sheet.","2":"the","3":"top"},{"1":"Dill pickles are sour but taste fine.","2":"NA","3":"NA"},{"1":"Down that road is the way to the grain farmer.","2":"the","3":"way"},{"1":"Either mud or dust are found at all times.","2":"NA","3":"NA"},{"1":"The best method is to fix it in place with clips.","2":"NA","3":"NA"},{"1":"If you mumble your speech will be lost.","2":"NA","3":"NA"},{"1":"At night the alarm roused him from a deep sleep.","2":"the","3":"alarm"},{"1":"Read just what the meter says.","2":"the","3":"meter"},{"1":"Fill your pack with bright trinkets for the poor.","2":"the","3":"poor."},{"1":"The small red neon lamp went out.","2":"NA","3":"NA"},{"1":"Clams are small, round, soft, and tasty.","2":"NA","3":"NA"},{"1":"The fan whirled its round blades softly.","2":"NA","3":"NA"},{"1":"The line where the edges join was clean.","2":"the","3":"edges"},{"1":"Breathe deep and smell the piny air.","2":"the","3":"deep"},{"1":"It matters not if he reads these words or those.","2":"NA","3":"NA"},{"1":"A brown leather bag hung from its strap.","2":"NA","3":"NA"},{"1":"A toad and a frog are hard to tell apart.","2":"a","3":"frog"},{"1":"A white silk jacket goes with any shoes.","2":"NA","3":"NA"},{"1":"A break in the dam almost caused a flood.","2":"the","3":"dam"},{"1":"Paint the sockets in the wall dull green.","2":"the","3":"sockets"},{"1":"The child crawled into the dense grass.","2":"the","3":"dense"},{"1":"Bribes fail where honest men work.","2":"NA","3":"NA"},{"1":"Trample the spark, else the flames will spread.","2":"the","3":"spark,"},{"1":"The hilt of the sword was carved with fine designs.","2":"the","3":"sword"},{"1":"A round hole was drilled through the thin board.","2":"the","3":"thin"},{"1":"Footprints showed the path he took up the beach.","2":"the","3":"path"},{"1":"She was waiting at my front lawn.","2":"NA","3":"NA"},{"1":"A vent near the edge brought in fresh air.","2":"the","3":"edge"},{"1":"Prod the old mule with a crooked stick.","2":"the","3":"old"},{"1":"It is a band of steel three inches wide.","2":"a","3":"band"},{"1":"The pipe ran almost the length of the ditch.","2":"the","3":"length"},{"1":"It was hidden from sight by a mass of leaves and shrubs.","2":"a","3":"mass"},{"1":"The weight of the package was seen on the high scale.","2":"the","3":"package"},{"1":"Wake and rise, and step into the green outdoors.","2":"the","3":"green"},{"1":"The green light in the brown box flickered.","2":"the","3":"brown"},{"1":"The brass tube circled the high wall.","2":"the","3":"high"},{"1":"The lobes of her ears were pierced to hold rings.","2":"NA","3":"NA"},{"1":"Hold the hammer near the end to drive the nail.","2":"the","3":"hammer"},{"1":"Next Sunday is the twelfth of the month.","2":"the","3":"twelfth"},{"1":"Every word and phrase he speaks is true.","2":"NA","3":"NA"},{"1":"He put his last cartridge into the gun and fired.","2":"the","3":"gun"},{"1":"They took their kids from the public school.","2":"the","3":"public"},{"1":"Drive the screw straight into the wood.","2":"the","3":"screw"},{"1":"Keep the hatch tight and the watch constant.","2":"the","3":"hatch"},{"1":"Sever the twine with a quick snip of the knife.","2":"the","3":"twine"},{"1":"Paper will dry out when wet.","2":"NA","3":"NA"},{"1":"Slide the catch back and open the desk.","2":"the","3":"catch"},{"1":"Help the weak to preserve their strength.","2":"the","3":"weak"},{"1":"A sullen smile gets few friends.","2":"NA","3":"NA"},{"1":"Stop whistling and watch the boys march.","2":"the","3":"boys"},{"1":"Jerk the cord, and out tumbles the gold.","2":"the","3":"cord,"},{"1":"Slide the tray across the glass top.","2":"the","3":"tray"},{"1":"The cloud moved in a stately way and was gone.","2":"a","3":"stately"},{"1":"Light maple makes for a swell room.","2":"a","3":"swell"},{"1":"Set the piece here and say nothing.","2":"the","3":"piece"},{"1":"Dull stories make her laugh.","2":"NA","3":"NA"},{"1":"A stiff cord will do to fasten your shoe.","2":"NA","3":"NA"},{"1":"Get the trust fund to the bank early.","2":"the","3":"trust"},{"1":"Choose between the high road and the low.","2":"the","3":"high"},{"1":"A plea for funds seems to come again.","2":"a","3":"for"},{"1":"He lent his coat to the tall gaunt stranger.","2":"the","3":"tall"},{"1":"There is a strong chance it will happen once more.","2":"a","3":"strong"},{"1":"The duke left the park in a silver coach.","2":"the","3":"park"},{"1":"Greet the new guests and leave quickly.","2":"the","3":"new"},{"1":"When the frost has come it is time for turkey.","2":"the","3":"frost"},{"1":"Sweet words work better than fierce.","2":"NA","3":"NA"},{"1":"A thin stripe runs down the middle.","2":"the","3":"middle."},{"1":"A six comes up more often than a ten.","2":"a","3":"ten."},{"1":"Lush ferns grow on the lofty rocks.","2":"the","3":"lofty"},{"1":"The ram scared the school children off.","2":"the","3":"school"},{"1":"The team with the best timing looks good.","2":"the","3":"best"},{"1":"The farmer swapped his horse for a brown ox.","2":"a","3":"brown"},{"1":"Sit on the perch and tell the others what to do.","2":"the","3":"perch"},{"1":"A steep trail is painful for our feet.","2":"NA","3":"NA"},{"1":"The early phase of life moves fast.","2":"NA","3":"NA"},{"1":"Green moss grows on the northern side.","2":"the","3":"northern"},{"1":"Tea in thin china has a sweet taste.","2":"a","3":"in"},{"1":"Pitch the straw through the door of the stable.","2":"the","3":"straw"},{"1":"The latch on the back gate needed a nail.","2":"the","3":"back"},{"1":"The goose was brought straight from the old market.","2":"the","3":"old"},{"1":"The sink is the thing in which we pile dishes.","2":"the","3":"thing"},{"1":"A whiff of it will cure the most stubborn cold.","2":"the","3":"most"},{"1":"The facts don't always show who is right.","2":"NA","3":"NA"},{"1":"She flaps her cape as she parades the street.","2":"the","3":"street."},{"1":"The loss of the cruiser was a blow to the fleet.","2":"the","3":"cruiser"},{"1":"Loop the braid to the left and then over.","2":"the","3":"braid"},{"1":"Plead with the lawyer to drop the lost cause.","2":"the","3":"lawyer"},{"1":"Calves thrive on tender spring grass.","2":"NA","3":"NA"},{"1":"Post no bills on this office wall.","2":"NA","3":"NA"},{"1":"Tear a thin sheet from the yellow pad.","2":"a","3":"thin"},{"1":"A cruise in warm waters in a sleek yacht is fun.","2":"a","3":"sleek"},{"1":"A streak of color ran down the left edge.","2":"the","3":"left"},{"1":"It was done before the boy could see it.","2":"the","3":"boy"},{"1":"Crouch before you jump or miss the mark.","2":"the","3":"mark."},{"1":"Pack the kits and don't forget the salt.","2":"the","3":"kits"},{"1":"The square peg will settle in the round hole.","2":"the","3":"round"},{"1":"Fine soap saves tender skin.","2":"NA","3":"NA"},{"1":"Poached eggs and tea must suffice.","2":"a","3":"must"},{"1":"Bad nerves are jangled by a door slam.","2":"a","3":"door"},{"1":"Ship maps are different from those for planes.","2":"NA","3":"NA"},{"1":"Dimes showered down from all sides.","2":"NA","3":"NA"},{"1":"They sang the same tunes at each party.","2":"the","3":"same"},{"1":"The sky in the west is tinged with orange red.","2":"the","3":"west"},{"1":"The pods of peas ferment in bare fields.","2":"NA","3":"NA"},{"1":"The horse balked and threw the tall rider.","2":"the","3":"tall"},{"1":"The hitch between the horse and cart broke.","2":"the","3":"horse"},{"1":"Pile the coal high in the shed corner.","2":"the","3":"coal"},{"1":"A gold vase is both rare and costly.","2":"NA","3":"NA"},{"1":"The knife was hung inside its bright sheath.","2":"NA","3":"NA"},{"1":"The rarest spice comes from the far East.","2":"the","3":"far"},{"1":"The roof should be tilted at a sharp slant.","2":"a","3":"sharp"},{"1":"A smatter of French is worse than none.","2":"NA","3":"NA"},{"1":"The mule trod the treadmill day and night.","2":"the","3":"treadmill"},{"1":"The aim of the contest is to raise a great fund.","2":"the","3":"contest"},{"1":"To send it now in large amounts is bad.","2":"NA","3":"NA"},{"1":"There is a fine hard tang in salty air.","2":"a","3":"fine"},{"1":"Cod is the main business of the north shore.","2":"the","3":"main"},{"1":"The slab was hewn from heavy blocks of slate.","2":"NA","3":"NA"},{"1":"Dunk the stale biscuits into strong drink.","2":"the","3":"stale"},{"1":"Hang tinsel from both branches.","2":"NA","3":"NA"},{"1":"Cap the jar with a tight brass cover.","2":"the","3":"jar"},{"1":"The poor boy missed the boat again.","2":"the","3":"boat"},{"1":"Be sure to set that lamp firmly in the hole.","2":"the","3":"hole."},{"1":"Pick a card and slip it under the pack.","2":"a","3":"card"},{"1":"A round mat will cover the dull spot.","2":"the","3":"dull"},{"1":"The first part of the plan needs changing.","2":"the","3":"plan"},{"1":"A good book informs of what we ought to know.","2":"NA","3":"NA"},{"1":"The mail comes in three batches per day.","2":"NA","3":"NA"},{"1":"You cannot brew tea in a cold pot.","2":"a","3":"in"},{"1":"Dots of light betrayed the black cat.","2":"the","3":"black"},{"1":"Put the chart on the mantel and tack it down.","2":"the","3":"chart"},{"1":"The night shift men rate extra pay.","2":"a","3":"pay."},{"1":"The red paper brightened the dim stage.","2":"the","3":"dim"},{"1":"See the player scoot to third base.","2":"the","3":"player"},{"1":"Slide the bill between the two leaves.","2":"the","3":"bill"},{"1":"Many hands help get the job done.","2":"the","3":"job"},{"1":"We don't like to admit our small faults.","2":"NA","3":"NA"},{"1":"No doubt about the way the wind blows.","2":"the","3":"way"},{"1":"Dig deep in the earth for pirate's gold.","2":"the","3":"earth"},{"1":"The steady drip is worse than a drenching rain.","2":"a","3":"drenching"},{"1":"A flat pack takes less luggage space.","2":"NA","3":"NA"},{"1":"Green ice frosted the punch bowl.","2":"the","3":"punch"},{"1":"A stuffed chair slipped from the moving van.","2":"the","3":"moving"},{"1":"The stitch will serve but needs to be shortened.","2":"NA","3":"NA"},{"1":"A thin book fits in the side pocket.","2":"the","3":"side"},{"1":"The gloss on top made it unfit to read.","2":"NA","3":"NA"},{"1":"The hail pattered on the burnt brown grass.","2":"the","3":"burnt"},{"1":"Seven seals were stamped on great sheets.","2":"NA","3":"NA"},{"1":"Our troops are set to strike heavy blows.","2":"NA","3":"NA"},{"1":"The store was jammed before the sale could start.","2":"the","3":"sale"},{"1":"It was a bad error on the part of the new judge.","2":"a","3":"bad"},{"1":"One step more and the board will collapse.","2":"the","3":"board"},{"1":"Take the match and strike it against your shoe.","2":"the","3":"match"},{"1":"The pot boiled but the contents failed to jell.","2":"the","3":"contents"},{"1":"The baby puts his right foot in his mouth.","2":"NA","3":"NA"},{"1":"The bombs left most of the town in ruins.","2":"the","3":"town"},{"1":"Stop and stare at the hard working man.","2":"the","3":"hard"},{"1":"The streets are narrow and full of sharp turns.","2":"NA","3":"NA"},{"1":"The pup jerked the leash as he saw a feline shape.","2":"the","3":"leash"},{"1":"Open your book to the first page.","2":"the","3":"first"},{"1":"Fish evade the net and swim off.","2":"the","3":"net"},{"1":"Dip the pail once and let it settle.","2":"the","3":"pail"},{"1":"Will you please answer that phone.","2":"NA","3":"NA"},{"1":"The big red apple fell to the ground.","2":"the","3":"ground."},{"1":"The curtain rose and the show was on.","2":"the","3":"show"},{"1":"The young prince became heir to the throne.","2":"the","3":"throne."},{"1":"He sent the boy on a short errand.","2":"the","3":"boy"},{"1":"Leave now and you will arrive on time.","2":"NA","3":"NA"},{"1":"The corner store was robbed last night.","2":"NA","3":"NA"},{"1":"A gold ring will please most any girl.","2":"NA","3":"NA"},{"1":"The long journey home took a year.","2":"a","3":"year."},{"1":"She saw a cat in the neighbor's house.","2":"a","3":"cat"},{"1":"A pink shell was found on the sandy beach.","2":"the","3":"sandy"},{"1":"Small children came to see him.","2":"NA","3":"NA"},{"1":"The grass and bushes were wet with dew.","2":"NA","3":"NA"},{"1":"The blind man counted his old coins.","2":"NA","3":"NA"},{"1":"A severe storm tore down the barn.","2":"the","3":"barn."},{"1":"She called his name many times.","2":"NA","3":"NA"},{"1":"When you hear the bell, come quickly.","2":"the","3":"bell,"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p><br></p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Задание
</div>
</div>
<div class="callout-body-container callout-body">
<p>Найдите в sentences все предложения, где есть to, и выберите следующее за этим слово. Переведите в нижний регистр. Узнайте, сколько всего уникальных сочетаний.</p>
</div>
</div>
<p><br></p>
</section>
<section id="str_replace" class="level2" data-number="7.11">
<h2 data-number="7.11" class="anchored" data-anchor-id="str_replace"><span class="header-section-number">7.11</span> str_replace</h2>
<p>Функции <code>str_replace()</code> и <code>str_replace_all()</code> позволяют заменять совпадения на новые символы.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"apple"</span>, <span class="st">"pear"</span>, <span class="st">"banana"</span>)</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(x, <span class="st">"[aeiou]"</span>, <span class="st">"-"</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "-pple"  "p-ar"   "b-nana"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(x, <span class="st">"[aeiou]"</span>, <span class="st">"-"</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "-ppl-"  "p--r"   "b-n-n-"</code></pre>
</div>
</div>
<p>Этим можно воспользоваться, если вы хотите, например, удалить из текста все греческие символы. Для стандартного греческого алфавита хватит <code>[Α-Ωα-ω]</code>, но для древнегреческого этого, например, не хватит. Попробуем на отрывке из письма Цицерона Аттику, которое содержит греческий текст.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>cicero <span class="ot">&lt;-</span> <span class="st">"nihil hāc sōlitūdine iūcundius, nisi paulum interpellāsset Amyntae fīlius. ὢ ἀπεραντολογίας ἀηδοῦς! "</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(cicero, <span class="st">"[Α-Ωα-ω]"</span>, <span class="st">""</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "nihil hāc sōlitūdine iūcundius, nisi paulum interpellāsset Amyntae fīlius. ὢ ἀί ἀῦ! "</code></pre>
</div>
</div>
<p>ὢ ἀί ἀῦ! Не все у нас получилось гладко. Попробуем иначе:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(cicero, <span class="st">"[\u0370-\u03FF]"</span>, <span class="st">""</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "nihil hāc sōlitūdine iūcundius, nisi paulum interpellāsset Amyntae fīlius. ὢ ἀ ἀῦ! "</code></pre>
</div>
</div>
<p>Удалилась (буквально была заменена на пустое место) та диакритика, которая есть в новогреческом (ί). Но остались еще буквы со сложной диакритикой, которой современные греки не пользуются.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>no_greek <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(cicero, <span class="st">"[[\u0370-\u03FF][\U1F00-\U1FFF]]"</span>, <span class="st">""</span>)</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>no_greek</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "nihil hāc sōlitūdine iūcundius, nisi paulum interpellāsset Amyntae fīlius.   ! "</code></pre>
</div>
</div>
<p>! Мы молодцы. Избавились от этого непонятного греческого.</p>
<p>На самом деле, конечно, <code>str_replace</code> хорош тем, что он позволяет производить осмысленные замены. Например, мы можем в оставшемся латинском текст заменить гласные с макроном (черточка, означающая долготу) на обычные гласные.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(no_greek, <span class="fu">c</span>(<span class="st">"ā"</span> <span class="ot">=</span> <span class="st">"a"</span>, <span class="st">"ū"</span> <span class="ot">=</span> <span class="st">"u"</span>, <span class="st">"ī"</span> <span class="ot">=</span> <span class="st">"i"</span>, <span class="st">"ō"</span> <span class="ot">=</span> <span class="st">"o"</span>))</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "nihil hac solitudine iucundius, nisi paulum interpellasset Amyntae filius.   ! "</code></pre>
</div>
</div>
<p>Красота. О более сложных заменах с перемещением групп можно посмотреть видео <a href="https://vk.com/video-211800158_456239296">здесь</a> и <a href="https://vk.com/video-211800158_456239297">здесь</a>. Это помогает даже в таком скорбном деле, как переоформление библиографии.</p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Задание
</div>
</div>
<div class="callout-body-container callout-body">
<p>Дана библиографическая запись:</p>
<p>Ast, Friedrich. 1816. Platon’s Leben und Schriften. Leipzig, Weidmann.</p>
<p>Используя регулярные выражения, замените полное имя на инициал. Запятую перед инициалом удалите. Уберите название издательства. Год поставьте в круглые скобки.</p>
</div>
</div>
</section>
<section id="str_split" class="level2" data-number="7.12">
<h2 data-number="7.12" class="anchored" data-anchor-id="str_split"><span class="header-section-number">7.12</span> str_split</h2>
<p>Функция <code>str_split()</code> помогает разбить текст на предложения, слова или просто на бессмысленные наборы символов. Это важный этап подготовки текста для анализа, и проводится он нередко именно с применением регулярных выражений.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>sentences <span class="sc">|&gt;</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">2</span>) <span class="sc">|&gt;</span> </span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">" "</span>)</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "The"     "birch"   "canoe"   "slid"    "on"      "the"     "smooth" 
[8] "planks."

[[2]]
[1] "Glue"        "the"         "sheet"       "to"          "the"        
[6] "dark"        "blue"        "background."</code></pre>
</div>
</div>
<p>Но можно обойтись и без регулярных выражений.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"This is a sentence.  This is another sentence."</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(x, <span class="fu">boundary</span>(<span class="st">"word"</span>))</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;This&gt; &lt;is&gt; &lt;a&gt; &lt;sentence&gt;.  &lt;This&gt; &lt;is&gt; &lt;another&gt; &lt;sentence&gt;.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(x, <span class="fu">boundary</span>(<span class="st">"sentence"</span>))</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;This is a sentence.  &gt;&lt;This is another sentence.&gt;</code></pre>
</div>
</div>
<p>Очень удобно, но убедитесь, что в вашем языке границы слов и предложения выглядят как у людей. С древнегреческим эта штука не справится (как делить на предложения греческие и латинские тексты, я рассказывала <a href="https://vk.com/video-211800158_456239226">здесь</a>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>apology <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"νῦν δ' ἐπειδὴ ἀνθρώπω ἐστόν, τίνα αὐτοῖν ἐν νῷ ἔχεις ἐπιστάτην λαβεῖν; τίς τῆς τοιαύτης ἀρετῆς, τῆς ἀνθρωπίνης τε καὶ πολιτικῆς, ἐπιστήμων ἐστίν; οἶμαι γάρ σε ἐσκέφθαι διὰ τὴν τῶν ὑέων κτῆσιν. ἔστιν τις,” ἔφην ἐγώ, “ἢ οὔ;” “Πάνυ γε,” ἦ δ' ὅς. “Τίς,” ἦν δ' ἐγώ, “καὶ ποδαπός, καὶ πόσου διδάσκει;"</span>)</span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(apology, <span class="fu">boundary</span>(<span class="st">"sentence"</span>))</span></code><button title="Скопировать текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;νῦν δ' ἐπειδὴ ἀνθρώπω ἐστόν, τίνα αὐτοῖν ἐν νῷ ἔχεις ἐπιστάτην λαβεῖν; τίς τῆς τοιαύτης ἀρετῆς, τῆς ἀνθρωπίνης τε καὶ πολιτικῆς, ἐπιστήμων ἐστίν; οἶμαι γάρ σε ἐσκέφθαι διὰ τὴν τῶν ὑέων κτῆσιν. ἔστιν τις,” ἔφην ἐγώ, “ἢ οὔ;” “Πάνυ γε,” ἦ δ' ὅς. &gt;&lt;“Τίς,” ἦν δ' ἐγώ, “καὶ ποδαπός, καὶ πόσου διδάσκει;&gt;</code></pre>
</div>
</div>
<p>Полный крах 💩</p>


</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>https://r4ds.had.co.nz/strings.html<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>https://stringr.tidyverse.org/reference/str_sub.html<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>https://r4ds.had.co.nz/strings.html#extract-matches<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Скопировано");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Скопировано");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./share.html" class="pagination-link" aria-label="Публикационная система Quarto">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Публикационная система Quarto</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./scrape.html" class="pagination-link" aria-label="Веб-скрапинг">
        <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Веб-скрапинг</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>